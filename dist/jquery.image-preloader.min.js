(function($){"use strict";var defaultListeners={progress:function(){},load:function(){},error:function(){},finish:function(){}},loadImage,onProgress,onImageLoad,onImageError;loadImage=function($image,success,error){var img=$image.get(0),$newImage;if(img.complete&&typeof img.naturalWidth!=="undefined"){success($image)}else{$newImage=$("<img>");$newImage.on({load:function(){success($image)},error:function(){error($image)}});$newImage.prop("src",$image.prop("src"))}};onProgress=function(status,listeners){listeners.progress(status);if(status.loaded+status.failed===status.total){listeners.finish(status)}};onImageLoad=function($image,status,listeners){status.loaded+=1;listeners.load($image);onProgress(status,listeners)};onImageError=function($image,status,listeners){status.failed+=1;listeners.error($image);onProgress(status,listeners)};$.imagePathPreloader=function(imagePaths,listeners){imagePaths=$.isArray(imagePaths)?imagePaths:[imagePaths];listeners=$.extend({},defaultListeners,listeners||{});var status={loaded:0,failed:0,total:imagePaths.length};$.each(imagePaths,function(index,imagePath){var $image=$('<img src="'+imagePath+'" />');loadImage($image,function($image){onImageLoad($image,status,listeners)},function($image){onImageError($image,status,listeners)})})};$.fn.imagePreloader=function(listeners){var status={loaded:0,failed:0,total:this.size()};listeners=$.extend({},defaultListeners,listeners||{});return this.each(function(){loadImage($(this),function($image){onImageLoad($image,status,listeners)},function($image){onImageError($image,status,listeners)})})}})(jQuery);